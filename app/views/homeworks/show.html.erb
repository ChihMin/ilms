<div class="homework">
  <% if is_admin?(current_user) %>
    <%= link_to("EDIT", edit_homework_path, class: "btn btn-warning pull-right") %>
    <%= link_to("DELETE", homework_path(@homework), method: :delete, class: "btn btn-danger pull-right", data: { confirm: "Are you sure ?" }) %>
  <% elsif current_user.is_member_of?(@homework) %>
    <%= link_to("刪除作業", homework_answer_path(@homework, @answer), method: :delete, class: "btn btn-danger pull-right", data: { confirm: "確定要把辛辛苦苦寫的作業刪除掉嗎？" }) %>
  <% else %>
    <%= link_to("交作業", new_homework_answer_path(@homework), class: "btn btn-primary pull-right") %>
  <% end %>
</div>

<h1> <%= @homework.title %> </h1> 
<hr>
<%= @homework.description.html_safe %>

<hr>

<% if is_admin?(current_user) %>
  <h3> 已交名單 </h3>
  <table class="table table-hover">
    <thead>
      <th> Title </th>
      <th> File </th>
      <th> Name </th>
    </thead>
    <tbody>
      <% @answers.each do |answer| %>
        <tr>
          <td> <%= link_to answer.title, homework_answer_path(@homework, answer) %> </td>
          <td> <%= link_to "Download", answer.attachment.url %> </td>
          <td> <%= answer.author.name %> </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <hr>

  <h3> 未交名單 </h3>
  <table class="table table-hover">
    <thead>
      <th> Name </th>
      <th> Email </th>
    </thead>
    <tbody>
      <% @non_submitted_students.each do |student| %>
        <tr>
          <td> <%= student.name  %> </td>
          <td> <%= student.email %> </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% elsif @answer != nil %>
  <h3> Title </h3>
  <%= @answer.title %>

  <h3> Description </h3>
  <%= @answer.description.html_safe %>

  <h3> Attachment </h3>
  <%= link_to "Download", @answer.attachment.url %>
<% end %>


